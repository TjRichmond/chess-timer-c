

/**
 * @file    max7219.h
 * @brief   Header for stm32u0xx_hal_max7219.h file
 *          This file constains the common defines of the max7219 IC.
 */
#ifndef _HAL_MAX7219_H
#define _HAL_MAX7219_H

#ifdef __cplusplus
extern "C"
{
#endif
#include "stm32u0xx_hal.h"

  /**
   * @brief   HAL MAX7219 address structure definition
   */
  typedef enum
  {
    MAX7219_ADDRESS_NO_OP = 0x00,
    MAX7219_ADDRESS_DIGIT_0 = 0x01,
    MAX7219_ADDRESS_DIGIT_1 = 0x02,
    MAX7219_ADDRESS_DIGIT_2 = 0x03,
    MAX7219_ADDRESS_DIGIT_3 = 0x04,
    MAX7219_ADDRESS_DIGIT_4 = 0x05,
    MAX7219_ADDRESS_DIGIT_5 = 0x06,
    MAX7219_ADDRESS_DIGIT_6 = 0x07,
    MAX7219_ADDRESS_DIGIT_7 = 0x08,
    MAX7219_ADDRESS_DECODE_MODE = 0x09,
    MAX7219_ADDRESS_INTENSITY = 0x0A,
    MAX7219_ADDRESS_SCAN_LIMIT = 0x0B,
    MAX7219_ADDRESS_SHUTDOWN = 0x0C,
    MAX7219_ADDRESS_DISPLAY_TEST = 0x0F
  } MAX7219_AddressTypeDef;

  /**
   * @brief   HAL MAX7219 commands definition
   */
  typedef enum
  {
    MAX7219_COMMAND_SHUTDOWN_MODE = 0x00,
    MAX7219_COMMAND_NORMAL_OPERATION = 0x01,
    MAX7219_COMMAND_NO_DECODE = 0x00,
    MAX7219_COMMAND_CODE_B_DIGIT_0 = 0x01,
    MAX7219_COMMAND_CODE_B_DIGIT_3_0 = 0x0F,
    MAX7219_COMMAND_CODE_B_DIGIT_7_0 = 0xFF,
    MAX7219_COMMAND_CODE_B_FONT_0 = 0x00,
    MAX7219_COMMAND_CODE_B_FONT_1 = 0x01,
    MAX7219_COMMAND_CODE_B_FONT_2 = 0x02,
    MAX7219_COMMAND_CODE_B_FONT_3 = 0x03,
    MAX7219_COMMAND_CODE_B_FONT_4 = 0x04,
    MAX7219_COMMAND_CODE_B_FONT_5 = 0x05,
    MAX7219_COMMAND_CODE_B_FONT_6 = 0x06,
    MAX7219_COMMAND_CODE_B_FONT_7 = 0x07,
    MAX7219_COMMAND_CODE_B_FONT_8 = 0x08,
    MAX7219_COMMAND_CODE_B_FONT_9 = 0x09,
    MAX7219_COMMAND_CODE_B_FONT_DASH = 0x0A,
    MAX7219_COMMAND_CODE_B_FONT_E = 0x0B,
    MAX7219_COMMAND_CODE_B_FONT_H = 0x0C,
    MAX7219_COMMAND_CODE_B_FONT_L = 0x0D,
    MAX7219_COMMAND_CODE_B_FONT_P = 0x0E,
    MAX7219_COMMAND_CODE_B_FONT_BLANK = 0x0F,
    MAX7219_COMMAND_CODE_B_FONT_DP = 0x10,
    MAX7219_COMMAND_INTENSITY_0 = 0x00,
    MAX7219_COMMAND_INTENSITY_1 = 0x01,
    MAX7219_COMMAND_INTENSITY_2 = 0x02,
    MAX7219_COMMAND_INTENSITY_3 = 0x03,
    MAX7219_COMMAND_INTENSITY_4 = 0x04,
    MAX7219_COMMAND_INTENSITY_5 = 0x05,
    MAX7219_COMMAND_INTENSITY_6 = 0x06,
    MAX7219_COMMAND_INTENSITY_7 = 0x07,
    MAX7219_COMMAND_INTENSITY_8 = 0x08,
    MAX7219_COMMAND_INTENSITY_9 = 0x09,
    MAX7219_COMMAND_INTENSITY_10 = 0x0A,
    MAX7219_COMMAND_INTENSITY_11 = 0x0B,
    MAX7219_COMMAND_INTENSITY_12 = 0x0C,
    MAX7219_COMMAND_INTENSITY_13 = 0x0D,
    MAX7219_COMMAND_INTENSITY_14 = 0x0E,
    MAX7219_COMMAND_INTENSITY_15 = 0x0F,
    MAX7219_COMMAND_INTENSITY_MIN = MAX7219_COMMAND_INTENSITY_0,
    MAX7219_COMMAND_INTENSITY_MAX = MAX7219_COMMAND_INTENSITY_15,
    MAX7219_COMMAND_SCAN_0 = 0x00,
    MAX7219_COMMAND_SCAN_1_0 = 0x01,
    MAX7219_COMMAND_SCAN_2_0 = 0x02,
    MAX7219_COMMAND_SCAN_3_0 = 0x03,
    MAX7219_COMMAND_SCAN_4_0 = 0x04,
    MAX7219_COMMAND_SCAN_5_0 = 0x05,
    MAX7219_COMMAND_SCAN_6_0 = 0x06,
    MAX7219_COMMAND_SCAN_7_0 = 0x07,
    MAX7219_COMMAND_TEST_DISABLE = 0x00,
    MAX7219_COMMAND_TEST_ENABLE = 0x01,
  } MAX7219_CommandTypeDef;

  /**
   * @brief   HAL MAX7219 B-Codes definition
   */
  typedef enum
  {
    MAX7219_CODE_B_0,
    MAX7219_CODE_B_1,
    MAX7219_CODE_B_2,
    MAX7219_CODE_B_3,
    MAX7219_CODE_B_4,
    MAX7219_CODE_B_5,
    MAX7219_CODE_B_6,
    MAX7219_CODE_B_7,
    MAX7219_CODE_B_8,
    MAX7219_CODE_B_9,
    MAX7219_CODE_B_DASH,
    MAX7219_CODE_B_E,
    MAX7219_CODE_B_H,
    MAX7219_CODE_B_L,
    MAX7219_CODE_B_P,
    MAX7219_CODE_B_BLANK,
    MAX7219_CODE_B_DP = 0x80,
    MAX7219_CODE_B_DP_0 = MAX7219_CODE_B_DP | MAX7219_CODE_B_0,
    MAX7219_CODE_B_DP_1 = MAX7219_CODE_B_DP | MAX7219_CODE_B_1,
    MAX7219_CODE_B_DP_2 = MAX7219_CODE_B_DP | MAX7219_CODE_B_2,
    MAX7219_CODE_B_DP_3 = MAX7219_CODE_B_DP | MAX7219_CODE_B_3,
    MAX7219_CODE_B_DP_4 = MAX7219_CODE_B_DP | MAX7219_CODE_B_4,
    MAX7219_CODE_B_DP_5 = MAX7219_CODE_B_DP | MAX7219_CODE_B_5,
    MAX7219_CODE_B_DP_6 = MAX7219_CODE_B_DP | MAX7219_CODE_B_6,
    MAX7219_CODE_B_DP_7 = MAX7219_CODE_B_DP | MAX7219_CODE_B_7,
    MAX7219_CODE_B_DP_8 = MAX7219_CODE_B_DP | MAX7219_CODE_B_8,
    MAX7219_CODE_B_DP_9 = MAX7219_CODE_B_DP | MAX7219_CODE_B_9,
    MAX7219_CODE_B_DP_DASH = MAX7219_CODE_B_DP | MAX7219_CODE_B_DASH,
    MAX7219_CODE_B_DP_E = MAX7219_CODE_B_DP | MAX7219_CODE_B_E,
    MAX7219_CODE_B_DP_H = MAX7219_CODE_B_DP | MAX7219_CODE_B_H,
    MAX7219_CODE_B_DP_L = MAX7219_CODE_B_DP | MAX7219_CODE_B_L,
    MAX7219_CODE_B_DP_P = MAX7219_CODE_B_DP | MAX7219_CODE_B_P,
    MAX7219_CODE_B_DP_BLANK = MAX7219_CODE_B_DP | MAX7219_CODE_B_BLANK,
  } MAX7219_CodeBTypeDef;

  /**
   * @brief   HAL MAX7219 digit position definition
   */
  typedef enum
  {
    MAX7219_DIGIT_0,
    MAX7219_DIGIT_1,
    MAX7219_DIGIT_2,
    MAX7219_DIGIT_3,
    MAX7219_DIGIT_4,
    MAX7219_DIGIT_5,
    MAX7219_DIGIT_6,
    MAX7219_DIGIT_7,
  } MAX7219_DigitPosTypeDef;

  /**
   * @brief   MAX7219 handle Structure definition
   */
  typedef struct __MAX7219_HandleTypeDef
  {
    GPIO_TypeDef *CSPort;
    uint16_t CSPin;
    SPI_HandleTypeDef *hspi;
    MAX7219_CodeBTypeDef Display[8];
  } MAX7219_HandleTypeDef;

  HAL_StatusTypeDef HAL_MAX7219_Init(
      MAX7219_HandleTypeDef *hmax7219);

  HAL_StatusTypeDef HAL_MAX7219_SendMessage(
      MAX7219_HandleTypeDef *hmax7219,
      MAX7219_AddressTypeDef addr,
      MAX7219_CommandTypeDef cmd);

  HAL_StatusTypeDef HAL_MAX7219_WriteDigit(
      MAX7219_HandleTypeDef *hmax7219,
      MAX7219_DigitPosTypeDef position,
      MAX7219_CodeBTypeDef symbol);

  HAL_StatusTypeDef HAL_MAX7219_UpdateDisplay(
      MAX7219_HandleTypeDef *hmax7219);

  HAL_StatusTypeDef HAL_MAX7219_IntToBCD(
      MAX7219_HandleTypeDef *hmax7219,
      uint32_t int_value);

  HAL_StatusTypeDef HAL_MAX7219_WriteInt(
    MAX7219_HandleTypeDef *hmax7219,
    uint32_t int_value);

#ifdef __cplusplus
}
#endif

#endif